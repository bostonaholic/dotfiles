#!/bin/bash

source $HOME/.colors

function remove_all_containers {
    docker ps --all | sed '1 d' | awk '{print $1}' | xargs -L1 docker rm
}

function remove_all_images {
    docker images --all | sed '1 d' | awk '{print $3}' | xargs -L1 docker rmi --force
}

function remove_dangling_volumes {
    local dangling_volumes=$(docker volume ls --quiet --filter dangling=true)
    if [ -n "$dangling_volumes" ]; then
        docker volume rm $dangling_volumes
    fi
}

printf "${GREEN}===>${WHITE_BOLD} remove all containers${NO_COLOR}\n" && \
    remove_all_containers

printf "${GREEN}===>${WHITE_BOLD} remove all images${NO_COLOR}\n" && \
    remove_all_images

printf "${GREEN}===>${WHITE_BOLD} remove dangling volumes${NO_COLOR}\n" && \
    remove_dangling_volumes
