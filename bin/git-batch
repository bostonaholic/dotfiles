#!/bin/bash
#
# Run git commands in all git projects
#
# $ git batch status -sb
#

#
# TODO: nested directories
#

set -euo pipefail

DIRECTORIES=$(ls -d "*/")

for d in $DIRECTORIES
do
    if [[ -d "$d/.git" ]]; then
        pushd "$d" > /dev/null || exit
        pwd
        git "$@"
        popd > /dev/null || exit
        echo
    fi
done
