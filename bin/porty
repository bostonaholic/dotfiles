#!/usr/bin/env bash

set +x
set -e

case "$1" in
    info)
        lsof -i :$2
        for pid in $(lsof -t -i :$2)
        do
            ps -ef | grep --regexp=$pid
        done
        ;;
    kill)
        for pid in $(lsof -t -i :$2)
        do
            echo "kill $pid"
            kill $pid
        done
        ;;
    *)
        echo "Usage:"
        echo "porty info $port"
        ;;
esac
