#!/bin/bash
################################################################################
# Grep Routes - Search Rails Routes
#
# DESCRIPTION:
#   Searches Rails application routes for a pattern and formats the output.
#   Useful for quickly finding specific routes in large Rails applications.
#
# USAGE:
#   grep-routes <pattern>
#
# ARGUMENTS:
#   pattern  - String or regex to search for in routes
#
# EXAMPLES:
#   grep-routes user          # Find all routes containing "user"
#   grep-routes "POST.*api"   # Find POST routes with "api"
#   grep-routes sessions      # Find session-related routes
#
# OUTPUT:
#   Tab-separated route information (verb, path, controller#action)
#
# DEPENDENCIES:
#   - Rails application (must be run from Rails project root)
#   - bundler
#   - Gemfile with rake
#
# NOTES:
#   Uses 'bundle exec rake routes' under the hood.
#   Formats output by normalizing whitespace to tabs for easier reading.
#
################################################################################

set -eu -o pipefail

bundle exec rake routes | grep -e "$1" | tr -s " " | tr " " "\t"
